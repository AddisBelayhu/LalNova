{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const token=localStorage.getItem('token');const userData=localStorage.getItem('user');if(token&&userData){setUser(JSON.parse(userData));axios.defaults.headers.common['Authorization']=\"Bearer \".concat(token);}setLoading(false);},[]);const login=async(email,password)=>{try{const response=await axios.post('/api/auth/login',{email,password});const{token,user}=response.data;localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));axios.defaults.headers.common['Authorization']=\"Bearer \".concat(token);setUser(user);return{success:true};}catch(error){var _error$response,_error$response$data;return{success:false,error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Login failed'};}};const logout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');delete axios.defaults.headers.common['Authorization'];setUser(null);};const value={user,login,logout,loading,isAdmin:(user===null||user===void 0?void 0:user.role)==='ADMIN'};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}